{
  "$schema": "lpp/v0.2.0",
  "id": "lpp_loader",
  "name": "L++ Blueprint Loader",
  "version": "1.0.0",
  "description": "Loads and validates JSON blueprints into Blueprint schema objects",
  "context_schema": {
    "properties": {
      "error": {
        "type": "string"
      },
      "result": {
        "type": "object"
      },
      "blueprint_path": {
        "type": "string"
      },
      "raw_data": {
        "type": "object"
      }
    }
  },
  "states": {
    "idle": {
      "name": "Idle",
      "description": "Waiting for blueprint load request"
    },
    "reading": {
      "name": "Reading",
      "description": "Reading blueprint file from disk"
    },
    "validating": {
      "name": "Validating",
      "description": "Validating blueprint structure and references"
    },
    "loading": {
      "name": "Loading",
      "description": "Loading blueprint components into schema"
    },
    "complete": {
      "name": "Complete",
      "description": "Blueprint successfully loaded"
    },
    "error": {
      "name": "Error",
      "description": "Loading failed with error"
    }
  },
  "transitions": [
    {
      "id": "t0",
      "from": "idle",
      "to": "reading",
      "on_event": "LOAD_REQUEST"
    },
    {
      "id": "t1",
      "from": "reading",
      "to": "validating",
      "on_event": "READ_DONE"
    },
    {
      "id": "t2",
      "from": "validating",
      "to": "loading",
      "on_event": "VALIDATION_PASSED"
    },
    {
      "id": "t3",
      "from": "loading",
      "to": "complete",
      "on_event": "LOADING_DONE"
    },
    {
      "id": "t_err_read",
      "from": "reading",
      "to": "error",
      "on_event": "READ_ERROR"
    },
    {
      "id": "t_err_validate",
      "from": "validating",
      "to": "error",
      "on_event": "VALIDATION_FAILED"
    },
    {
      "id": "t_err_load",
      "from": "loading",
      "to": "error",
      "on_event": "LOAD_ERROR"
    },
    {
      "id": "t_reset",
      "from": "*",
      "to": "idle",
      "on_event": "RESET"
    }
  ],
  "gates": {
    "g_has_path": {
      "type": "expression",
      "expression": "blueprint_path is not None"
    },
    "g_valid_json": {
      "type": "expression",
      "expression": "raw_data is not None"
    }
  },
  "actions": {
    "a_read_file": {
      "type": "compute",
      "compute_unit": "impl:open",
      "description": "Read blueprint file from disk"
    },
    "a_parse_json": {
      "type": "compute",
      "compute_unit": "impl:json.load",
      "description": "Parse JSON content"
    },
    "a_validate_required": {
      "type": "compute",
      "compute_unit": "impl:self._validate_required_fields",
      "description": "Validate required blueprint fields"
    },
    "a_validate_refs": {
      "type": "compute",
      "compute_unit": "impl:self._validate_references",
      "description": "Validate internal references"
    },
    "a_load_states": {
      "type": "compute",
      "compute_unit": "impl:self._load_states",
      "description": "Load state definitions"
    },
    "a_load_transitions": {
      "type": "compute",
      "compute_unit": "impl:self._load_transitions",
      "description": "Load transition definitions"
    },
    "a_load_gates": {
      "type": "compute",
      "compute_unit": "impl:self._load_gates",
      "description": "Load gate definitions"
    },
    "a_load_actions": {
      "type": "compute",
      "compute_unit": "impl:self._load_actions",
      "description": "Load action definitions"
    },
    "a_load_schema": {
      "type": "compute",
      "compute_unit": "impl:self._load_context_schema",
      "description": "Load context schema"
    },
    "a_create_blueprint": {
      "type": "compute",
      "compute_unit": "impl:Blueprint",
      "description": "Create Blueprint object"
    }
  },
  "entry_state": "idle",
  "terminal_states": {
    "complete": {},
    "error": {}
  }
}