{
  "$schema": "lpp/v0.2.0",
  "id": "lpp_validator",
  "name": "L++ Blueprint Validator",
  "version": "1.0.0",
  "description": "Validates blueprint structure and semantic correctness",
  "context_schema": {
    "properties": {
      "error": {
        "type": "string"
      },
      "result": {
        "type": "object"
      },
      "blueprint": {
        "type": "object"
      },
      "errors": {
        "type": "array"
      }
    }
  },
  "states": {
    "idle": {
      "name": "Idle",
      "description": "Ready to validate"
    },
    "checking_structure": {
      "name": "Checking Structure",
      "description": "Validating required fields"
    },
    "checking_states": {
      "name": "Checking States",
      "description": "Validating state definitions"
    },
    "checking_transitions": {
      "name": "Checking Transitions",
      "description": "Validating transition references"
    },
    "checking_gates": {
      "name": "Checking Gates",
      "description": "Validating gate expressions"
    },
    "complete": {
      "name": "Complete",
      "description": "Validation completed"
    },
    "error": {
      "name": "Error",
      "description": "Validation found errors"
    }
  },
  "transitions": [
    {
      "id": "t_start",
      "from": "idle",
      "to": "checking_structure",
      "on_event": "VALIDATE"
    },
    {
      "id": "t_structure_ok",
      "from": "checking_structure",
      "to": "checking_states",
      "on_event": "STRUCTURE_OK"
    },
    {
      "id": "t_states_ok",
      "from": "checking_states",
      "to": "checking_transitions",
      "on_event": "STATES_OK"
    },
    {
      "id": "t_transitions_ok",
      "from": "checking_transitions",
      "to": "checking_gates",
      "on_event": "TRANSITIONS_OK"
    },
    {
      "id": "t_gates_ok",
      "from": "checking_gates",
      "to": "complete",
      "on_event": "GATES_OK"
    },
    {
      "id": "t_err_structure",
      "from": "checking_structure",
      "to": "error",
      "on_event": "STRUCTURE_ERROR"
    },
    {
      "id": "t_err_states",
      "from": "checking_states",
      "to": "error",
      "on_event": "STATES_ERROR"
    },
    {
      "id": "t_err_transitions",
      "from": "checking_transitions",
      "to": "error",
      "on_event": "TRANSITIONS_ERROR"
    },
    {
      "id": "t_err_gates",
      "from": "checking_gates",
      "to": "error",
      "on_event": "GATES_ERROR"
    },
    {
      "id": "t_reset",
      "from": "*",
      "to": "idle",
      "on_event": "RESET"
    }
  ],
  "gates": {
    "g_has_id": {
      "type": "expression",
      "expression": "'id' in blueprint"
    },
    "g_has_states": {
      "type": "expression",
      "expression": "'states' in blueprint"
    },
    "g_has_entry": {
      "type": "expression",
      "expression": "'entry_state' in blueprint"
    },
    "g_no_errors": {
      "type": "expression",
      "expression": "len(errors) == 0"
    }
  },
  "actions": {
    "a_check_required": {
      "type": "compute",
      "compute_unit": "impl:validate_required_fields",
      "description": "Check required blueprint fields"
    },
    "a_check_states": {
      "type": "compute",
      "compute_unit": "impl:validate_states",
      "description": "Validate state definitions"
    },
    "a_check_transitions": {
      "type": "compute",
      "compute_unit": "impl:validate_transitions",
      "description": "Validate transition references"
    },
    "a_check_gates": {
      "type": "compute",
      "compute_unit": "impl:validate_gates",
      "description": "Validate gate expressions"
    },
    "a_append_error": {
      "type": "compute",
      "compute_unit": "impl:errors.append",
      "description": "Append validation error"
    },
    "a_raise_error": {
      "type": "compute",
      "compute_unit": "impl:BlueprintValidationError",
      "description": "Raise validation error"
    }
  },
  "entry_state": "idle",
  "terminal_states": {
    "complete": {},
    "error": {}
  }
}