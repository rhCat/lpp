flowchart TD
    %% L++ Logic CAD Export
    state_idle(["<b>idle</b><br/>No blueprint loaded, waiting for input"]):::entry
    state_error(["<b>error</b><br/>Error state"])
    state_loaded(["<b>loaded</b><br/>Blueprint loaded, ready to lint"])
    state_complete(["<b>complete</b><br/>Linting complete, results available"])
    state_linting(["<b>linting</b><br/>Running lint checks"])
    gate_t_0_0{{"no_blueprint?"}}
    state_idle -- "LOAD" --> gate_t_0_0
    act_t_0_0[["load_blueprint"]]
    gate_t_0_0 -- True --> act_t_0_0
    act_t_0_0 --> state_loaded
    act_t_1_0[["set_error"]]
    state_idle -- "LOAD_FAILED" --> act_t_1_0
    act_t_1_0 --> state_error
    act_t_2_0[["load_blueprint, clear_findings"]]
    state_loaded -- "LOAD" --> act_t_2_0
    act_t_2_0 --> state_loaded
    act_t_3_0[["load_blueprint, clear_findings"]]
    state_complete -- "LOAD" --> act_t_3_0
    act_t_3_0 --> state_loaded
    gate_t_4_0{{"has_blueprint?"}}
    state_loaded -- "LINT" --> gate_t_4_0
    act_t_4_0[["init_lint"]]
    gate_t_4_0 -- True --> act_t_4_0
    act_t_4_0 --> state_linting
    act_t_5_0[["check_unreachable_states"]]
    state_linting -- "CHECK_UNREACHABLE" --> act_t_5_0
    act_t_5_0 --> state_linting
    act_t_6_0[["check_dead_end_states"]]
    state_linting -- "CHECK_DEAD_END" --> act_t_6_0
    act_t_6_0 --> state_linting
    act_t_7_0[["check_unused_gates"]]
    state_linting -- "CHECK_UNUSED_GATES" --> act_t_7_0
    act_t_7_0 --> state_linting
    act_t_8_0[["check_unused_actions"]]
    state_linting -- "CHECK_UNUSED_ACTIONS" --> act_t_8_0
    act_t_8_0 --> state_linting
    act_t_9_0[["check_unused_context"]]
    state_linting -- "CHECK_UNUSED_CONTEXT" --> act_t_9_0
    act_t_9_0 --> state_linting
    act_t_10_0[["check_orphaned_transitions"]]
    state_linting -- "CHECK_ORPHANED" --> act_t_10_0
    act_t_10_0 --> state_linting
    act_t_11_0[["check_missing_gate_refs"]]
    state_linting -- "CHECK_GATE_REFS" --> act_t_11_0
    act_t_11_0 --> state_linting
    act_t_12_0[["check_missing_action_refs"]]
    state_linting -- "CHECK_ACTION_REFS" --> act_t_12_0
    act_t_12_0 --> state_linting
    act_t_13_0[["check_duplicate_ids"]]
    state_linting -- "CHECK_DUPLICATES" --> act_t_13_0
    act_t_13_0 --> state_linting
    act_t_14_0[["check_naming_conventions"]]
    state_linting -- "CHECK_NAMING" --> act_t_14_0
    act_t_14_0 --> state_linting
    act_t_15_0[["compute_metrics, compute_summary, generate_report"]]
    state_linting -- "FINALIZE" --> act_t_15_0
    act_t_15_0 --> state_complete
    gate_t_16_0{{"has_blueprint?"}}
    state_loaded -- "LINT_ALL" --> gate_t_16_0
    act_t_16_0[["init_lint, check_unreachable_states, check_dead_end_states, check_unused_gates, check_unused_actions, check_unused_context, check_orphaned_transitions, check_missing_gate_refs, check_missing_action_refs, check_duplicate_ids, check_naming_conventions, compute_metrics, compute_summary, generate_report"]]
    gate_t_16_0 -- True --> act_t_16_0
    act_t_16_0 --> state_complete
    gate_t_17_0{{"has_blueprint?"}}
    state_complete -- "LINT_ALL" --> gate_t_17_0
    act_t_17_0[["init_lint, check_unreachable_states, check_dead_end_states, check_unused_gates, check_unused_actions, check_unused_context, check_orphaned_transitions, check_missing_gate_refs, check_missing_action_refs, check_duplicate_ids, check_naming_conventions, compute_metrics, compute_summary, generate_report"]]
    gate_t_17_0 -- True --> act_t_17_0
    act_t_17_0 --> state_complete
    act_t_18_0[["clear_findings"]]
    state_complete -- "BACK" --> act_t_18_0
    act_t_18_0 --> state_loaded
    act_t_19_0[["unload_blueprint"]]
    state_loaded -- "UNLOAD" --> act_t_19_0
    act_t_19_0 --> state_idle
    act_t_20_0[["unload_blueprint, clear_findings"]]
    state_complete -- "UNLOAD" --> act_t_20_0
    act_t_20_0 --> state_idle
    act_t_21_0[["set_config"]]
    state_idle -- "CONFIGURE" --> act_t_21_0
    act_t_21_0 --> state_idle
    act_t_22_0[["set_config"]]
    state_loaded -- "CONFIGURE" --> act_t_22_0
    act_t_22_0 --> state_loaded
    act_t_23_0[["clear_error"]]
    state_error -- "CLEAR" --> act_t_23_0
    act_t_23_0 --> state_idle
    classDef entry fill:#e1f5fe,stroke:#01579b,stroke-width:4px
    classDef terminal fill:#eceff1,stroke:#263238,stroke-width:4px